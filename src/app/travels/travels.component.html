<div class="trips">
    @if (!currentTrip) {
    <!-- Display the list of trips  -->
    <div class="trips__container">
        <div class="trips__itemlist">
            @for (trip of trips; track trip) {
                <app-trip [trip]=trip (click)="openTrip(trip)" (mouseenter)="onMouseEnterTrip(trip)" (mouseleave)="onMouseLeaveTrip()"></app-trip>
            }
            <div class="trips_phantomitem"></div>
        </div>
    </div>
    }
    @else {
    <!-- Display the individual trip -->
    <div id="trip-scroll" class="trip__container">
        <div class="trip__close" (click)="closeTrip()">
            <span class="material-symbols-outlined">
                arrow_left_alt
            </span>
        </div>
        <div class="trip__limit limit-start">
            <div class="limit-icon-container">
                <span class="limit-icon material-symbols-outlined icon">house</span>
            </div>
            <div class="limit-description">
                <div class="limit-description_text">Trip started</div>
                <div class="limit-description_date">{{parseDate(currentTrip.startDate)}}</div>
            </div>
        </div>
        <div class="trip__steplist">
            @for (step of currentTrip.steps; track step; let index = $index; let last = $last) {
                <app-step [step]=step></app-step>
                
                @if (!last) {
                    <div class="trip-separator">
                        <div class="trip-separator_icon"></div>
                        <div class="trip-separator_text">
                            Traveled for {{parseDuration(currentTrip.steps[index].date, currentTrip.steps[index + 1].date)}}
                        </div>
                    </div>
                }
            }
        </div>
        <div class="trip__limit limit-end">
            <div class="limit-icon-container">
                <span class="limit-icon material-symbols-outlined icon">flag</span>
            </div>
            <div class="limit-description">
                <div class="limit-description_text">Trip finished</div>
                <div class="limit-description_date">{{parseDate(currentTrip.endDate)}}</div>
            </div>
        </div>
    </div>
    }

    <div class="map__container">
        <div class="map__spacer" [class.is-trip-view]=!!currentTrip></div>
        <div class="map" #map></div>
    </div>
</div>